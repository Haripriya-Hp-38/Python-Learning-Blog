import requests
import json
from typing import List, Dict, Any

API_URL: str = 'https://jsonplaceholder.typicode.com/users'

def fetch_and_display_users(url: str) -> None:
    print(f"🌍 Fetching data from: {url}")
    print("-" * 40)
    
    try:
        response: requests.Response = requests.get(url)
        response.raise_for_status() 

        data: List[Dict[str, Any]] = response.json()

        print(f"✅ Received {len(data)} records.")
        print("\n📝 User Data:")
        print("=" * 40)

        for user in data:
            name: str = user.get('name', 'N/A')
            email: str = user.get('email', 'N/A')
            username: str = user.get('username', 'N/A')
            
            print(f"  Name:     {name}")
            print(f"  Username: {username}")
            print(f"  Email:    {email}")
            print("-" * 15)

    except requests.exceptions.HTTPError as err_http:
        print(f"❌ HTTP Error occurred: {err_http}")
    except requests.exceptions.ConnectionError as err_conn:
        print(f"❌ Connection Error occurred: {err_conn}")
    except requests.exceptions.Timeout as err_timeout:
        print(f"❌ Timeout Error occurred: {err_timeout}")
    except requests.exceptions.RequestException as err:
        print(f"❌ An error occurred during the request: {err}")
    except json.JSONDecodeError:
        print("❌ Error: Could not decode JSON response.")
    
if __name__ == "__main__":
    fetch_and_display_users(API_URL)
